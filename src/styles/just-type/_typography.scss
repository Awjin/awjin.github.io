@use 'sass:color';
@use 'config';
@use 'utils';

@mixin typography {
  $font-size-small: 90%;
  $line-height-small: 0.9 * config.line-height();
  $line-height-large: 1.1 * config.line-height();
  $border: 1px solid config.color('light');

  font-family: config.font-stack('body');
  font-size: config.font-size-static();
  @media all and (min-width: config.breakpoint()){
    font-size: config.font-size-responsive();
  }
  line-height: config.line-height();
  color: config.color('normal');

  h1,
  h2,
  h3,
  h4,
  p,
  ol,
  ul {
    margin: 0;
    margin-bottom: config.whitespace();
  }

  h1,
  h2,
  h3,
  h4 {
    font-family: config.font-stack('headings');
    font-weight: normal;
    line-height: $line-height-small;
  }

  h1 {
    font-size: utils.scale-font-size(3);
  }

  h2 {
    margin-top: utils.scale-whitespace(2);
    font-size: utils.scale-font-size(2);
  }

  h3 {
    margin-top: utils.scale-whitespace(1);
    font-size: utils.scale-font-size(1);
  }

  h4 {
    margin-top: utils.scale-whitespace(0);
    font-size: utils.scale-font-size(0);
    font-style: italic;
  }

  h1 + *,
  h2 + h3,
  h3 + h4 {
    margin-top: scale-whitespace(0);
  }

  p + ol,
  p + ul {
    margin-top: -1 * config.whitespace();
  }

  ol,
  ul {
    padding-left: 2 * config.whitespace();

    ol,
    ul {
      padding-left: 1.75 * config.whitespace();
    }
  }

  li {
    margin: 0;
    margin-bottom: 0.5 * config.whitespace();
    padding-left: 0.25 * config.whitespace();

    ol,
    ul {
      margin-top: 0.5 * config.whitespace();
      margin-bottom: 0.5 * config.whitespace();
    }
  }

  a {
    color: config.color('action');
    text-decoration: none;

    &:hover,
    &:active,
    &:focus {
      text-decoration: underline;
    }
  }

  code {
    font-family: config.font-stack('mono');
    font-size: $font-size-small;
  }

  img,
  iframe,
  figure,
  table {
    margin: (1.66667 * config.whitespace()) 0;
  }

  img {
    display: block;
    max-width: 100%;
  }

  img + figcaption {
    margin-top: -1 * config.whitespace();
  }

  figcaption {
    font-size: $font-size-small;
    font-style: italic;
    color: config.color('light');
  }

  table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    text-align: left;
    font-size: $font-size-small;
  }

  caption {
    margin-top: 0.5 * config.whitespace();
    caption-side: bottom;
    text-align: left;
    font-style: italic;
    color: config.color('light');
  }

  thead,
  tfoot,
  th {
    font-weight: bold;
  }

  tr {
    border: $border;
  }

  th,
  td {
    vertical-align: top;
    padding: (0.5 * config.whitespace()) (0.66667 * config.whitespace());
  }

  blockquote,
  pre {
    margin: (1.33333 * config.whitespace()) 0;
  }

  blockquote {
    border-left: $border;
    padding-left: 0.66667 * config.whitespace();
    font-style: italic;
    color: config.color('light');
  }

  pre {
    overflow-x: auto;
    border: $border;
    padding: (0.66667 * config.whitespace()) config.whitespace() (0.75 * config.whitespace()) config.whitespace();
    font-size: $font-size-small;
  }

  hr {
    width: 100%;
    height: 1px;
    margin: utils.scale-whitespace(2) 0;
    border: none;
    background: config.color('light');
  }
}
